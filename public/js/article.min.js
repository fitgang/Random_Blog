function toggleLike(){const e=this;e.classList.toggle("clicked");let t=JSON.parse(sessionStorage.getItem("article"));t.like?t.like=!1:t.like=!0,sessionStorage.setItem("article",JSON.stringify(t))}function toggleCommentSection(){async function e(){const e=JSON.parse(sessionStorage.getItem("article")).id,t=await fetch(`https://jsonplaceholder.typicode.com/comments?postId=${e}`),i=await t.json();let o=JSON.parse(sessionStorage.getItem("article"));o.comments={},i.forEach(e=>{const t={id:e.id,author:{name:e.name,image:"./images/writing.jpg"},body:e.body,timeStamp:getRandomDate()},i=createComment(t);n.appendChild(i),o.comments[e.id]=t}),sessionStorage.setItem("article",JSON.stringify(o))}const t=this,n=document.getElementById("comments-section"),i=n.querySelector("#comment-form"),o=n.querySelectorAll(".reply-btn"),r=t.classList.toggle("clicked");["none","show-comment-section"].forEach(e=>n.classList.toggle(e)),r?(o.length||e(),setTimeout(()=>i.querySelector("textarea").focus(),1e3),i.addEventListener("submit",commentOnArticle),o.forEach(e=>e.addEventListener("click",generateReplyUI))):(i.removeEventListener("submit",commentOnArticle),o.forEach(e=>e.removeEventListener("click",generateReplyUI)))}function getInput(e){const t=e.querySelector("textarea");let n=t.value.trim();return n&&(n=t.value.trim().replace(/[^\S\n]/g," "),t.value=""),n}function commentOnArticle(e){e.preventDefault();const t=e.target;getInputAndDisplayComment(t,e.path[1].childElementCount++,t)}function createDate(e){const t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return`${t}/${n}/${i}`}function createComment(e,t){const n=document.getElementsByTagName("template")[0],i=n.content.querySelector(".comment").cloneNode(!0),o=i.querySelector(".comment-author"),r=o.querySelector("img"),a=i.querySelector("span"),s=i.querySelector(".comment-body"),u=i.querySelector("time"),c=i.querySelector("button");return i.id=`comment-${e.id}`,r.src=e.author.image,r.alt=e.author.name,a.innerText=e.author.name,s.innerText=t?`${t}\n${e.body}`:e.body,u.innerText=e.timeStamp,c.addEventListener("click",generateReplyUI),i}function getInputAndDisplayComment(e,t,n,i){const o=getInput(e);if(o){const e={timeStamp:createDate(new Date),id:t,author:{name:"anonymous",image:"./images/writing.jpg"},body:o},r=createComment(e,i);n.insertAdjacentElement("afterend",r);let a=JSON.parse(sessionStorage.getItem("article"));a.comments[t]=e,sessionStorage.setItem("article",JSON.stringify(a))}}function replyOnComment(e){e.preventDefault();const t=e.target,n=e.path[1],i=n.querySelector(".reply-btn"),o=`@${n.querySelector(".comment-author-name").innerText}`;removeReplyUI(t,i),getInputAndDisplayComment(t,e.path[2].childElementCount++,n,o)}function removeReplyUI(e,t){e.remove(),t.classList.remove("none")}function generateReplyUI(){const e=this,t=this.parentElement,n=document.getElementsByTagName("template")[0],i=n.content.querySelector("form").cloneNode(!0),o=i.querySelector("textarea"),r=i.querySelector("label"),a=i.querySelector(".cancel-reply-btn"),s=`${t.id}-input`;o.id=s,r.for=s,i.addEventListener("submit",replyOnComment),a.addEventListener("click",()=>removeReplyUI(i,e)),e.classList.add("none"),t.appendChild(i),o.focus()}function toggleSharingOptions(e){const t=document.getElementById("share-options");e?(t.classList.toggle("none"),console.log("clicked")):setTimeout(()=>t.classList.add("none"),500)}function openReportDialog(){function e(){n.classList.add("none"),o.removeEventListener("click",e),i.removeEventListener("submit",t)}function t(t){t.preventDefault();const n=t.target,i=n.querySelector("#report-form-title"),o=n.querySelector("#report-form-description"),r=i.value.trim(),a=o.value.trim();r&&a&&([i,o].forEach(e=>e.value=""),e())}const n=document.getElementById("report-dialog"),i=n.querySelector("form"),o=i.querySelector("#close-dialog-btn");n.classList.remove("none"),o.addEventListener("click",e),i.addEventListener("submit",t)}function searchQuery(e){function t(e){e.hasChildNodes()?e.childNodes.forEach(t):3===e.nodeType&&n(e)}function n(e){const t=e.textContent,i=t.toLowerCase().indexOf(o);if(-1!==i){const r=o.length;e.splitText(i),e=e.nextSibling,e.splitText(r);const a=document.createElement("mark");a.innerText=t.substring(i,i+r),a.className="mark",e.replaceWith(a),n(a.nextSibling)}}e.preventDefault(),sessionStorage.getItem("content")?removeSearchHighlight():saveContentInSession();const i=searchBar.value.trim();if(!i)return;const o=i.replace(/\s+/g," ").toLowerCase(),r=document.createTreeWalker(document.getElementById("body"));r.firstChild();do{t(r.currentNode)}while(r.nextSibling())}function saveContentInSession(){const e=document.getElementById("body").innerHTML;sessionStorage.setItem("content",JSON.stringify(e))}function removeSearchHighlight(){const e=document.getElementsByClassName("mark").length;if(e){const e=JSON.parse(sessionStorage.getItem("content"));document.getElementById("body").innerHTML=e}}function reactToInput(){const e=this.value.trim();!e&&marked&&removeSearchHighlight()}(function(){const e=sessionStorage.getItem("article");if(!e)return alert("Oops! Sorry to distrub,\nbut you might head to the home page and try again.\nDon't worry I will do that for you"),void(location=location.origin+"/public/index.html");const t="<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Videsne ut, quibus summa est in voluptate, perspicuum sit quid iis faciendum sit aut non faciendum? Ita relinquet duas, de quibus etiam atque etiam consideret. <mark>Mihi, inquam, qui te id ipsum rogavi?</mark> Sed plane dicit quod intellegit. Duo Reges: constructio interrete. Traditur, inquit, ab Epicuro ratio neglegendi doloris. <i>Igitur neque stultorum quisquam beatus neque sapientium non beatus.</i> Minime vero istorum quidem, inquit. Illi enim inter se dissentiunt. Ut pompa, ludis atque eius modi spectaculis teneantur ob eamque rem vel famem et sitim perferant? Vos autem cum perspicuis dubia debeatis illustrare, dubiis perspicua conamini tollere. Atque ut ceteri dicere existimantur melius quam facere, sic hi mihi videntur facere melius quam dicere.</p><ul><li>Omnes enim iucundum motum, quo sensus hilaretur.</li><li>Videamus igitur sententias eorum, tum ad verba redeamus.</li></ul><p>Illorum vero ista ipsa quam exilia de virtutis vi! Quam tantam volunt esse, ut beatum per se efficere possit. Idque testamento cavebit is, qui nobis quasi oraculum ediderit nihil post mortem ad nos pertinere? Rem unam praeclarissimam omnium maximeque laudandam, penitus viderent, quonam gaudio complerentur, cum tantopere eius adumbrata opinione laetentur? <i>Et ille ridens: Video, inquit, quid agas;</i> Nec enim figura corporis nec ratio excellens ingenii humani significat ad unam hanc rem natum hominem, ut frueretur voluptatibus. Atque ab isto capite fluere necesse est omnem rationem bonorum et malorum. Et tamen ego a philosopho, si afferat eloquentiam, non asperner, si non habeat, non admodum flagitem. Laelius clamores sof√≤w ille so lebat Edere compellans gumias ex ordine nostros.</p><blockquote cite='http://loripsum.net'>Nam et amici cultus et parentis ei, qui officio fungitur, in eo ipso prodest, quod ita fungi officio in recte factis est, quae sunt orta virtutibus.</blockquote><dl><dt><dfn>Ita credo.</dfn></dt><dd>Ac tamen, ne cui loco non videatur esse responsum, pauca etiam nunc dicam ad reliquam orationem tuam.</dd><dt><dfn>Non igitur bene.</dfn></dt><dd>Haec quo modo conveniant, non sane intellego.</dd><dt><dfn>An eiusdem modi?</dfn></dt><dd>Sed quod proximum fuit non vidit.</dd><dt><dfn>Stoici scilicet.</dfn></dt><dd>Verum esto: verbum ipsum voluptatis non habet dignitatem, nec nos fortasse intellegimus.</dd></dl><p>Et quod est munus, quod opus sapientiae? Curium putes loqui, interdum ita laudat, ut quid praeterea sit bonum neget se posse ne suspicari quidem. Non igitur potestis voluptate omnia dirigentes aut tueri aut retinere virtutem. Quibus rebus vita consentiens virtutibusque respondens recta et honesta et constans et naturae congruens existimari potest. <a href='http://loripsum.net/' target='_blank'>Itaque hic ipse iam pridem est reiectus;</a> <b>Ego vero volo in virtute vim esse quam maximam;</b> </p><ol><li>Quod si ita se habeat, non possit beatam praestare vitam sapientia.</li><li>Semovenda est igitur voluptas, non solum ut recta sequamini, sed etiam ut loqui deceat frugaliter.</li><li>Ut placet, inquit, etsi enim illud erat aptius, aequum cuique concedere.</li></ol>",n=JSON.parse(e),i=`${n.author.name.first} ${n.author.name.last}`,o=document.getElementById("date"),r=document.getElementById("title"),a=document.getElementById("author-image"),s=document.getElementById("author-name"),u=document.getElementById("body");o.innerText=n.date,r.innerText=n.title,a.src=n.author.picture.thumbnail,a.alt=i,s.innerText=i,u.innerHTML=`<p>${n.body}</p>`+t,removePreloader();const c=document.getElementById("share-options"),m=c.querySelector("#share-to-facebook"),l=c.querySelector("#share-to-whatsapp"),d=c.querySelector("#share-to-twitter"),p=window.location;m.href=encodeURI(`https://www.facebook.com/sharer/sharer.php?u=${p}`),l.href=encodeURI(`https://api.whatsapp.com/send?text=${p}`),d.href=encodeURI(`https://twitter.com/intent/tweet?text=Hey! Check out this article here&url=${p}`)})();const reactions=document.getElementById("reactions"),likeBtn=reactions.querySelector("#like-btn"),commentSectionBtn=reactions.querySelector("#comment-btn"),shareBtn=reactions.querySelector("#share-btn"),reportBtn=reactions.querySelector("#report-btn"),searchForm=document.getElementById("sna"),searchBar=searchForm.querySelector("input[type='text']");likeBtn.addEventListener("click",toggleLike),commentSectionBtn.addEventListener("click",toggleCommentSection),shareBtn.addEventListener("click",()=>toggleSharingOptions(!0)),shareBtn.addEventListener("blur",()=>toggleSharingOptions(!1)),reportBtn.addEventListener("click",openReportDialog),searchBar.addEventListener("blur",reactToInput),searchForm.addEventListener("submit",searchQuery);