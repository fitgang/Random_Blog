function displayCards(e){const t=document.getElementsByTagName("template")[0].content,r=document.querySelector("#article-cards");e.forEach(e=>{let a=t.cloneNode(!0).querySelector("article"),n=e.author.name;a.querySelector("p").textContent=e.body,a.querySelector("span").textContent=`${n.first} ${n.last}`,a.querySelector(".card-date").textContent=e.date;let s=a.querySelector("img");s.src=e.author.picture.thumbnail,s.alt="";let i=a.querySelector("a");i.textContent=e.title,i.id=e.id,i.addEventListener("click",openArticle),r.appendChild(a)})}function openArticle(e){e.preventDefault();const t=articles.list.find(t=>t.id==e.target.id);sessionStorage.setItem("article",JSON.stringify(t)),window.open("article.html")}function setFilterAndSearch(e){searchBy=e.target.innerText.toLowerCase(),searchForm.dispatchEvent(new SubmitEvent("submit"))}function toggleFilter(){const e=document.getElementById("filter");this.value?e.classList.remove("none"):e.classList.add("none")}function searchQuery(e){e.preventDefault();const t=document.getElementById("filter");setTimeout(()=>t.classList.add("none"),1e3);let r=searchBar.value.trim();if(!r)return;const a=r.replace(/\s+/g," ").toLowerCase(),n=getMatchingArticles(a,searchBy),s=document.querySelector("#article-cards");s.innerHTML="",searchBar.value="",displayCards(n)}function getMatchingArticles(e,t){let r=articles.list,a=[];if("title"!=t&&"all"!=t||(a=r.filter(t=>t.title.toLowerCase().includes(e))),"author"==t||"all"==t){let t=a?Array.from(a,e=>e.id):[],n=r.filter(r=>{if(t.includes(r.id))return!1;const a=r.author.name,n=`${a.first} ${a.last}`.toLowerCase();return n.includes(e)});a=a.concat(n)}return a}import{Article,createArticleList}from"./objects.js";const seeMoreBtn=document.getElementById("see-more"),searchForm=document.getElementById("sna"),searchBar=searchForm.querySelector("input[type='text']"),filterChoices=searchForm.querySelectorAll("label");let searchBy=filterChoices[0].innerText.toLowerCase(),articles=createArticleList([]);(async function(){function e(t){const r=Math.floor(Math.random()*(t.length-0+1)+0),a=t[r];return a||e(t)}let t=await fetch("https://jsonplaceholder.typicode.com/posts"),r=await t.json(),a=await fetch("https://randomuser.me/api/?results=10&inc=name,dob,picture&noinfo"),n=await a.json(),s=n.results;r.forEach(t=>{let r=getRandomDate(),a=e(s),n=new Article(t.id,t.title,t.body,r,a);articles.addItem(n)});const i=articles.list.slice(0,10);displayCards(i),localStorage.setItem("allArticles",JSON.stringify(i)),removePreloader()})(),seeMoreBtn.addEventListener("click",()=>{const e=document.getElementsByClassName("card").length,t=articles.list.slice(e,e+10);displayCards(t)}),filterChoices.forEach(e=>{e.addEventListener("click",setFilterAndSearch)}),searchBar.addEventListener("input",toggleFilter),searchForm.addEventListener("submit",searchQuery);